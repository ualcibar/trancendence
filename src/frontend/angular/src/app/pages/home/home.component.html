<div class="h-50real"><!--h-full da problemas con scroll-->
	<!--<button (click)="backgroundClicked()" class="absolute -z-1 backgroundButton"></button>-->
	<div *ngIf="debug">
        <p class="text-gray-500">Modo debug activado</p>
		<p class="text-white">chat websocket state: {{chatService.isConnected()}}</p>
		<p class="text-white">matchmaking websocket state: {{matchmakingService.isConnected()}}</p>
		<p class="text-white">matchmaking state : {{MatchmakingState[state.matchmakingState]}}</p>
		<p class="text-white">current online match state: {{matchmakingService.getCurrentMatchState()}}</p>
	</div>
	<div class="flex h-auto">
		<!--button (click)="backgroundClicked()" class="absolute -z-1 backgroundButton"></button-->
<!--        <app-chat class="flex chat" [@fadeInOut]></app-chat>-->

		<app-chat *ngIf="state.homeRenderState.chat$ | async" class="flex chat" [@fadeInOut]></app-chat>
		<div class="flex flex-col justify-center items-center h-auto w-full">
            <img class="floating mb-12" ngSrc="assets/img/spacepong-blanco.svg" width="500" height="500" alt="SpacePong Logo" priority>
			<button *ngIf="(state.homeRenderState.local$ | async) && (state.homeRenderState.render$)" (click)="changeState(HomeState.MatchTournament)"
				class="card mb-16" [@easeOut]>
				<h2 class="uppercase">Jugar</h2>
			</button>

            <!-- En el caso de que el usuario no haya iniciado sesión o no esté registrado -->
            <button *ngIf="!(state.homeRenderState.multiplayer$ | async) && (state.homeRenderState.local$ | async) && (state.homeRenderState.render$)"
                    routerLink="/login" class="card mb-16" [@easeOut]>
                <h2 class="uppercase">Jugar Online</h2>
            </button>

            <!-- En el caso de que el usuario haya iniciado sesión -->
			<button *ngIf="(state.homeRenderState.multiplayer$ | async) && (state.homeRenderState.render$)"
				(click)="changeState(HomeState.SearchingOnlineGame)" class="card mb-16" [@easeOut]>
				<h2 class="uppercase">Jugar Online</h2>
			</button>
			<button *ngIf="(state.homeRenderState.community$ | async) && (state.homeRenderState.render$)" (click)="changeState(HomeState.Community)"
				class="card mb-16" [@fadeInOut]>
				<h2 class="uppercase">Comunidad</h2>
			</button>
			<div *ngIf="(state.homeRenderState.match_tournament$ | async) && (state.homeRenderState.render$)" class="flex flex-col w-full justify-center items-center">
				<button (click)="changeState(HomeState.MatchGenerator)" class="card mb-16" [@easeOut]>
					<h2 class="uppercase">Partida Normal</h2>
				</button>
				<button (click)="changeState(HomeState.TournamentGenerator)" class="card mb-16" [@easeOut]>
					<h2 class="uppercase">Torneo</h2>
				</button>
			</div>
			<div *ngIf="(state.homeRenderState.tournamentGenerator$ | async) && (state.homeRenderState.render$)" [@fadeInOut]>
				<app-tournament-generator-component [settings]="getTournament()"></app-tournament-generator-component>
				<button (click)="createTournament()" class="btn text-white">START</button>
			</div>
			<div *ngIf="(state.homeRenderState.matchGenerator$ | async) && (state.homeRenderState.render$)" [@fadeInOut] class="sp-div rounded p-4 w-96">
                <button type="button" class="mr-2 btn btn-warning rounded-full" (click)="changeState(HomeState.MatchTournament)">
                    <i class="text-xl bi bi-arrow-left"></i> Volver al Inicio
                </button>
				<app-match-generator-component [settings]="getMatch()"></app-match-generator-component>
				<button (click)="createMatch()" class="btn text-white">START</button>
			</div>
			<div *ngIf="(state.homeRenderState.onlineMatchGenerator$ | async) && (state.homeRenderState.render$)" [@fadeInOut] class="sp-div rounded p-4 w-96">
				<app-online-match-generator-component [settings]="getOnlineMatch()"></app-online-match-generator-component>
				<button (click)="createOnlineMatch()" class="btn text-white">CREATE</button>
			</div>
			<div *ngIf="(state.homeRenderState.tournamentTree$ | async) && (state.homeRenderState.render$)" [@fadeInOut] class="sp-div rounded p-4 w-96">
				<app-tournament-tree-component [manager]="tournamentManager!"></app-tournament-tree-component>
			</div>
			<app-lobby-match *ngIf="(state.homeRenderState.joiningOnlineMatch$ | async) && (state.homeRenderState.render$)"></app-lobby-match>
			<app-lobby-search *ngIf="(state.homeRenderState.onlineMatchSearch$ | async) && (state.homeRenderState.render$)"></app-lobby-search>
		</div>
	</div>
</div>